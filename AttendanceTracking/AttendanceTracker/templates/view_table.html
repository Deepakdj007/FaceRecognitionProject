<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Attendance</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
  <script type="text/javascript">
    $(function() {
      $("#table1 td").each(function() {
        if ($(this).text() == 'A') {
          $(this).css('background-color', "rgb(255, 67, 67)");}
        if ($(this).text() == 'P') {
          $(this).css('background-color', "#13aa52");}
        if ($(this).text() == 'D') {
          $(this).css('background-color', "#ffe135");  
        }
      });
    });

    </script>
</head>
{% include 'base.html' %}

{% block content %}
<body class="vh-100 gradient-custom">
  
<div class="container">
    <br><br>
    <h2 style="color: rgb(14, 15, 19);" class="text-center">Attendance List</h2><br><br><br>            
    <table class="table table-dark table-striped table-hover table-responsive table-bordered table-condensed" id="table1">
      <thead>
        <tr>
          <th>RETID</th>
          <th>Period 1</th>
          <th>Period 2</th>
          <th>Period 3</th>
          <th>Period 4</th>
          <th>Period 5</th>
          <th>Period 6</th>
          <th>Period 7</th>
          <th>Present_hours</th>
          <th>Duty_leaves</th>
          <th>Absent_hours</th>
        </tr>
      </thead>
      <tbody>
      <!-- jinja2 Technique -->
      {% if d2 %}  
      {% for i in d2 %}
        <tr>
          <td>{{i.RETID}}</td>
          <td>{{i.P1}}</td>
          <td>{{i.P2}}</td>
          <td>{{i.P3}}</td>
          <td>{{i.P4}}</td>
          <td>{{i.P5}}</td>
          <td>{{i.P6}}</td>
          <td>{{i.P7}}</td>
          <td>{{i.Present_hours}}</td>
          <td>{{i.Duty_leaves}}</td>
          <td>{{i.Absent_hours}}</td>
        </tr>
      {% endfor %}
      {% endif %}
      </tbody>
    </table>
  </div><br>
    <form method="post" action="{% url 'notification' %}">
        {% csrf_token %}
        <button style="color: rgb(255, 255, 255);" type="submit" name="run_mail" class="button-1"><i style="color: rgb(35, 172, 226);" class="fa fa-bell" aria-hidden="true"></i> Notify Students</button>
    </form><br>
  </body>

{% endblock %}
</html>